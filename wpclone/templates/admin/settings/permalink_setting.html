{% extends 'admin/users/admin_base.html' %}
{% block css_theme_styles %}
    <!-- BEGIN THEME STYLES -->
    <link href="{{ STATIC_URL }}admin/css/style-metronic.css" rel="stylesheet" type="text/css"
          xmlns="http://www.w3.org/1999/html" xmlns="http://www.w3.org/1999/html" xmlns="http://www.w3.org/1999/html"/>
    <link href="{{ STATIC_URL }}admin/css/style.css" rel="stylesheet" type="text/css"/>
    <link href="{{ STATIC_URL }}admin/css/style-responsive.css" rel="stylesheet" type="text/css"/>
    <link href="{{ STATIC_URL }}admin/css/plugins.css" rel="stylesheet" type="text/css"/>
    <link href="{{ STATIC_URL }}admin/css/themes/default.css" rel="stylesheet" type="text/css" id="style_color"/>
    <link href="{{ STATIC_URL }}admin/css/custom.css" rel="stylesheet" type="text/css"/>
    <link href="{{ STATIC_URL }}css/style.css" rel="stylesheet" type="text/css"/>
    <!-- END THEME STYLES -->
{% endblock %}
{% block content_body %}
    <!-- BEGIN CONTENT -->
    <div class="page-content-wrapper">
        <div class="page-content">

            <!-- BEGIN PAGE HEADER-->
            <div class="row">
                <div class="col-md-12">
                    <!-- BEGIN PAGE TITLE & BREADCRUMB-->
                    <h3 class="page-title">Permalink Settings &nbsp;</h3>
                    <!-- END PAGE TITLE & BREADCRUMB-->
                </div>
            </div>

            <!-- BEGIN PAGE CONTENT-->
            <!--This is the error block -->
            <div class="note note-success error">

            </div>
            <!--This is the success block -->
            <div class="note note-success success">
                success message
            </div>


            <form method="post" id="reading_form" action="">{% csrf_token %}
                <input type="hidden" id="hidden_value" name="hidden_value"/>
                <div class="row">
                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 margin-bottom-10">
                        By default WordPress uses web URLs which have question marks and lots of numbers
                        in them; however, WordPress offers you the ability to create a custom URL structure for
                        your permalinks and archives. This can improve the aesthetics, usability, and
                        forward-compatibility of your links. A <a href="">number of tags are available,</a> and here are some
                        examples to ger you started.
                    </div>
                </div>

                <div class="row">
                    <div class="col-lg-3 col-md-3 col-sm-4 col-xs-12 margin-bottom-10">
                        <label class="control-label" for="title"><h4><b>Common Setting</b></h4></label>
                    </div>
                </div>

                <div class="row">
                    <div class="col-lg-3 col-md-3 col-sm-4 col-xs-12 margin-bottom-10">
                       <input type="radio" id="first" name="selection" class="make-switch switch-radio1" {% if hidden_value == 'first' %}checked{% endif %}>&nbsp;&nbsp;&nbsp;<b>Default</b>
                    </div>
                    <div class="col-lg-9 col-md-9 col-sm-9 col-xs-12 margin-bottom-10">
                        <a href="">http://localhost/wordpress/?p=123</a>
                        <br>
                    </div>
                </div><br>

                <div class="row">
                    <div class="col-lg-3 col-md-3 col-sm-4 col-xs-12 margin-bottom-10">
                        <input type="radio" id="second" name="selection" class="make-switch switch-radio1" {% if hidden_value == 'second' %}checked{% endif %}>&nbsp;&nbsp;&nbsp;<b>Day and name</b>
                    </div>
                    <div class="col-lg-9 col-md-9 col-sm-9 col-xs-12 margin-bottom-10">
                        <a href="">http://localhost/wordpress/2014/04/25/sample-post/</a>
                        <br>
                    </div>
                </div><br>

                <div class="row">
                    <div class="col-lg-3 col-md-3 col-sm-4 col-xs-12 margin-bottom-10">
                        <input type="radio" id="third" name="selection" class="make-switch switch-radio1" {% if hidden_value == 'third' %}checked{% endif %}>&nbsp;&nbsp;&nbsp;<b>Month and name</b>
                    </div>
                    <div class="col-lg-9 col-md-9 col-sm-9 col-xs-12 margin-bottom-10">
                        <a href="">http://localhost/wordpress/2014/04/sample-post</a>
                        <br>
                    </div>
                </div><br>

                <div class="row">
                    <div class="col-lg-3 col-md-3 col-sm-4 col-xs-12 margin-bottom-10">
                       <input type="radio" id="fourth" name="selection" class="make-switch switch-radio1" {% if hidden_value == 'fourth' %}checked{% endif %}>&nbsp;&nbsp;&nbsp;<b>Numeric</b>
                    </div>
                    <div class="col-lg-9 col-md-9 col-sm-9 col-xs-12 margin-bottom-10">
                        <a href="">http://localhost/wordpress/archives/123</a>
                        <br>
                    </div>
                </div><br>

                <div class="row">
                    <div class="col-lg-3 col-md-3 col-sm-4 col-xs-12 margin-bottom-10">
                        <input type="radio" id="fifth" name="selection" class="make-switch switch-radio1" {% if hidden_value == 'fifth' %}checked{% endif %}>&nbsp;&nbsp;&nbsp;<b>Post name</b>
                    </div>
                    <div class="col-lg-9 col-md-9 col-sm-9 col-xs-12 margin-bottom-10">
                        <a href="">http://localhost/wordpress/sample-post</a>
                        <br>
                    </div>
                </div><br>

                <div class="row">
                    <div class="col-lg-3 col-md-3 col-sm-4 col-xs-12 margin-bottom-10">
                        <input type="radio" id="sixth" name="selection" class="make-switch switch-radio1" {% if hidden_value == 'sixth' %}checked{% endif %}>&nbsp;&nbsp;&nbsp;<b>Custom structure</b>
                    </div>
                    <div class="col-lg-9 col-md-9 col-sm-9 col-xs-12 margin-bottom-10">
                        <a href="">http://localhost/wordpress/</a>
                        <input type="text" id="permalink_structure" name="permalink_structure" class="" value="{{ permalink_structure }}"/>
                        <br>
                    </div>
                </div><br>

                <div class="row">
                    <div class="col-lg-3 col-md-3 col-sm-4 col-xs-12 margin-bottom-10">
                        <label class="control-label" for="title"><h4></b><b>Optional</b></h4></label>
                    </div>
                </div>

                <div class="row">
                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 margin-bottom-10">
                        If you like, you may enter custom structures for your category and tag URLs here.
                        For example, using topics as your category base would make your category links like
                        <a href="">http://example.org/topics/uncategorized/.</a> If you leave these blank the
                            defaults will be used.
                    </div>
                </div><br>

                <div class="row">
                    <div class="col-lg-3 col-md-3 col-sm-4 col-xs-12 margin-bottom-10">
                        <label class="control-label" for="title"><b>Category base</b></label>
                    </div>
                    <div class="col-lg-9 col-md-9 col-sm-9 col-xs-12 margin-bottom-10">
                        <input type="text" id="category_base" name="category_base" class="col-md-5 col-dm-5 col-xs-12" value="{{ category_base }}"/>
                        <br>
                    </div>
                </div>

                <div class="row">
                    <div class="col-lg-3 col-md-3 col-sm-4 col-xs-12 margin-bottom-10">
                        <label class="control-label" for="title"><b>Tag base</b></label>
                    </div>
                    <div class="col-lg-9 col-md-9 col-sm-9 col-xs-12 margin-bottom-10">
                        <input type="text" id="tag_base" name="tag_base" class="col-md-5 col-dm-5 col-xs-12" value="{{ tag_base }}"/>
                        <br>
                    </div>
                </div><br>

                <div class="row">
                    <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12 margin-bottom-10">
                        <button type="button" id="submit_btn" class="btn btn-info">Save Changes</button>
                    </div>
                </div>
            </form>
            <!-- END PAGE CONTENT-->
        </div>
    </div>
    <!-- END CONTENT -->
{% endblock %}
<!-- BEGIN JAVASCRIPTS(Load javascripts at bottom, this will reduce page load time) -->
{% block js_page_level_plugins %}
    <!-- BEGIN PAGE LEVEL PLUGINS -->
    <!--<script src="{{ STATIC_URL }}admin/plugins/flot/jquery.flot.js" type="text/javascript"></script>
<script src="{{ STATIC_URL }}admin/plugins/flot/jquery.flot.resize.js" type="text/javascript"></script>
<script src="{{ STATIC_URL }}admin/plugins/flot/jquery.flot.categories.js" type="text/javascript"></script>
<!-- END PAGE LEVEL PLUGINS -->
{% endblock %}
{% block js_page_level_scripts %}
    <!-- BEGIN PAGE LEVEL SCRIPTS -->
    <script src="{{ STATIC_URL }}admin/js/core/app.js"></script>
    <script src="{{ STATIC_URL }}admin/js/custom/ecommerce-index.js"></script>

    <!-- END PAGE LEVEL SCRIPTS -->
{% endblock %}
{% block javascript %}
    <script type="text/javascript">
        jQuery(document).ready(function() {
            // initiate layout and plugins
            App.init();
        });
        $(document).ready(function() {
            // Initialize appendGrid
            /**
             * Required for Django's CSRF protection when using AJAX
             * Taken from here - http://docs.djangoproject.com/en/dev/ref/contrib/csrf/
             */


            $(document).ajaxSend(function(event, xhr, settings) {
                function getCookie(name) {
                    var cookieValue = null;
                    if (document.cookie && document.cookie != '') {
                        var cookies = document.cookie.split(';');
                        for (var i = 0; i < cookies.length; i++) {
                            var cookie = jQuery.trim(cookies[i]);
                            // Does this cookie string begin with the name we want?
                            if (cookie.substring(0, name.length + 1) == (name + '=')) {
                                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                                break;
                            }
                        }
                    }
                    return cookieValue;
                }
                function sameOrigin(url) {
                    // url could be relative or scheme relative or absolute
                    var host = document.location.host; // host + port
                    var protocol = document.location.protocol;
                    var sr_origin = '//' + host;
                    var origin = protocol + sr_origin;
                    // Allow absolute or scheme relative URLs to same origin
                    return (url == origin || url.slice(0, origin.length + 1) == origin + '/') ||
                            (url == sr_origin || url.slice(0, sr_origin.length + 1) == sr_origin + '/') ||
                        // or any other URL that isn't scheme relative or absolute i.e relative.
                            !(/^(\/\/|http:|https:).*/.test(url));
                }
                function safeMethod(method) {
                    return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
                }

                if (!safeMethod(settings.type) && sameOrigin(settings.url)) {
                    xhr.setRequestHeader("X-CSRFToken", getCookie('csrftoken'));
                }
            });

            $('#first').on('change',function(){
                    $('#hidden_value').val('first');
            });
            $('#second').on('change',function(){
                $('#hidden_value').val('second');
            });
            $('#third').on('change',function(){
                $('#hidden_value').val('third');
            });
            $('#fourth').on('change',function(){
                $('#hidden_value').val('fourth');
            });
            $('#fifth').on('change',function(){
                $('#hidden_value').val('fifth');
            });
            $('#sixth').on('change',function(){
                $('#hidden_value').val('sixth');
            });


            $('#submit_btn').click(function () {
                var data = JSON.stringify($('form').serializeObject());
                var parsedData = JSON.parse(data);
                $(".error").hide();
                $.ajax( {
                    type: "POST",
                    dataType: "text",
                    url: "{% url "permalink_setting" %}",
                    data:{permalink_setting:data},
                    success: function(result) {
                        if(result == "ok"){
                            $(".success").html("<b>Setting saved</b>").show();
                            $('html, body').animate({
                                scrollTop: $(".success").offset().top - 100
                            }, 1000);
                        }
                        else{
                            $(".error").html("<b>Error in Saving</b>").show();
                            $('html, body').animate({
                                scrollTop: $(".error").offset().top - 100
                            }, 1000);
                        }
                    },
                    error: function(result) {
                        $(".error").html("<b>Error in Saving</b>").show();
                        $('html, body').animate({
                            scrollTop: $(".error").offset().top - 100
                        }, 1000);
                    }
                });

            });
        });
    </script>
    <script>
        $.fn.serializeObject = function()
        {
            var o = {};
            var a = this.serializeArray();
            $.each(a, function() {
                if (o[this.name] !== undefined) {
                    if (!o[this.name].push) {
                        o[this.name] = [o[this.name]];
                    }
                    o[this.name].push(this.value || '');
                } else {
                    o[this.name] = this.value || '';
                }
            });
            return o;
        };
    </script>
    <!-- END JAVASCRIPTS -->
{% endblock %}